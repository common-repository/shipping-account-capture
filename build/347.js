"use strict";(globalThis.webpackChunkeniture_shipping_account_capture=globalThis.webpackChunkeniture_shipping_account_capture||[]).push([[347],{8347:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(1609),l=n(4977),a=n(9067),i=n(4073),o=n(1224),s=n(7636),c=n(1543),u=n(1641),d=n(8239),m=n(8031),p=n(6831),h=n(2477),A=n(7867),E=n(8763),g=n(3387),v=n(6554),y=n(5044),b=n(2320),f=n(2567);const x=({open:e,setOpen:t,alertMsg:n,severity:l})=>{const i=(e,n)=>{"clickaway"!==n&&t(!1)};return(0,r.createElement)(a.A,{sx:{display:"flex",justifyContent:"center"},width:500},(0,r.createElement)(b.A,{open:e,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:3e3,onClose:i},(0,r.createElement)(f.A,{onClose:i,severity:l,variant:"filled",sx:{width:"100%"}},n)))};var _=n(8766),C=n(9781);const k=({open:e,setOpen:t,onSave:n,carrier:l})=>{const[s,c]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),g=()=>{t(!1),c(""),A("")};(0,r.useEffect)((()=>{l&&c(l.bill_to_title||"")}),[l]);const v=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(e){const{current:e}=v;null!==e&&e.focus()}}),[e]),(0,r.createElement)(m.A,{open:e,onClose:g,"aria-labelledby":"carriers-dialog-title",maxWidth:"sm",fullWidth:!0},(0,r.createElement)(p.A,{sx:{m:0,p:2},id:"carriers-dialog-title"},"Bill-to option",(0,r.createElement)(u.A,{"aria-label":"close",onClick:g,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},(0,r.createElement)(C.A,null))),(0,r.createElement)(h.A,null,(0,r.createElement)(a.A,{sx:{width:"95%",p:2}},(0,r.createElement)(_.A,{label:"Label",value:s,onChange:e=>c(e.target.value),size:"medium",variant:"standard",InputLabelProps:{shrink:!0},inputProps:{style:{padding:"10px"}},fullWidth:!0,margin:"normal",error:Boolean(d),helperText:d}),(0,r.createElement)(i.A,{variant:"body2",color:"textSecondary",sx:{mt:1}},"This will be shown as a dropdown on the checkout page."))),(0,r.createElement)(E.A,null,(0,r.createElement)(o.A,{onClick:g},"Cancel"),(0,r.createElement)(o.A,{onClick:()=>{if(""===s.trim())return void A("Label is required");if(s.length>20)return void A("Label must be at most 20 characters");const e={id:l?l.id:0,bill_to_title:s};n(e),g()},color:"primary",variant:"contained"},"Save")))},S=({open:e,setOpen:t,onSave:n,service:l})=>{const[i,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[A,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),b=()=>{t(!1),s(""),d(""),g(""),y("")};(0,r.useEffect)((()=>{l&&(s(l.service_title||""),d(l.service_description||""))}),[l]);const f=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(e){const{current:e}=f;null!==e&&e.focus()}}),[e]),(0,r.createElement)(m.A,{open:e,onClose:b,"aria-labelledby":"services-dialog-title",maxWidth:"sm",fullWidth:!0},(0,r.createElement)(p.A,{sx:{m:0,p:2},id:"services-dialog-title"},"Service option",(0,r.createElement)(u.A,{"aria-label":"close",onClick:b,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},(0,r.createElement)(C.A,null))),(0,r.createElement)(h.A,null,(0,r.createElement)(a.A,{sx:{width:"95%",p:2}},(0,r.createElement)(_.A,{label:"Label",value:i,onChange:e=>s(e.target.value),variant:"standard",InputLabelProps:{shrink:!0},size:"medium",inputProps:{style:{padding:"10px"}},fullWidth:!0,margin:"normal",error:Boolean(A),helperText:A}),(0,r.createElement)(_.A,{label:"Description",value:c,onChange:e=>d(e.target.value),variant:"standard",InputLabelProps:{shrink:!0},size:"medium",inputProps:{style:{padding:"10px"}},fullWidth:!0,margin:"normal",error:Boolean(v),helperText:v}))),(0,r.createElement)(E.A,null,(0,r.createElement)(o.A,{onClick:b},"Cancel"),(0,r.createElement)(o.A,{onClick:()=>{if(""===i.trim())return void g("Label is required");if(i.length>20)return void g("Label must be at most 20 characters");if(c.length>50)return void y("Description must be at most 50 characters");const e={id:l?l.id:0,service_title:i,service_description:c,bill_to_option_id:l?l.bill_to_option_id:null};n(e),b()},color:"primary",variant:"contained"},"Save")))},w=()=>{const[e,t]=(0,r.useState)({showAlert:!1,msg:"",severity:"success"}),[n,b]=(0,r.useState)(!1),[f,_]=(0,r.useState)(!1),[C,w]=(0,r.useState)(null),[T,O]=(0,r.useState)(null),[j,L]=(0,r.useState)(null),[P,W]=(0,r.useState)(null),[B,D]=(0,r.useState)([]),[I,$]=(0,r.useState)(!1),[z,M]=(0,r.useState)(null),[J,N]=(0,r.useState)(null);(0,r.useEffect)((()=>{R()}),[]);const R=()=>{fetch(`${eniture_sac.eniture_sac_rest_url}bill-to-options`).then((e=>e.json())).then((e=>{D(e)})).catch((e=>{t({showAlert:!0,msg:"Unable to fetch bill to options",severity:"error"})}))},U=e=>{M("carrier"===e?C.id:T.id),N(e),$(!0),q(),F()},q=()=>{L(null)},F=()=>{W(null)};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(x,{open:e.showAlert,setOpen:e=>t((t=>({...t,showAlert:e}))),alertMsg:e.msg,severity:e.severity}),(0,r.createElement)(k,{open:n,setOpen:b,onSave:e=>{const n=`${eniture_sac.eniture_sac_rest_url}bill-to-option`;fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((()=>{t({showAlert:!0,msg:e.id?"Updated successfully":"Created successfully",severity:"success"}),R(),b(!1)})).catch((e=>{t({showAlert:!0,msg:"An error occurred while saving carrier",severity:"error"})}))},carrier:C}),(0,r.createElement)(S,{open:f,setOpen:_,onSave:e=>{const n=`${eniture_sac.eniture_sac_rest_url}service`;fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((()=>{t({showAlert:!0,msg:e.id?"Updated successfully":"Created successfully",severity:"success"}),R(),_(!1)})).catch((e=>{t({showAlert:!0,msg:"An error occurred while saving service",severity:"error"})}))},service:T}),(0,r.createElement)(l.A,{sx:{margin:"20px auto",padding:"20px"}},(0,r.createElement)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},(0,r.createElement)(i.A,{variant:"h5",component:"div"},"Bill-to options"),(0,r.createElement)(o.A,{style:{textTransform:"initial"},onClick:()=>{w(null),b(!0)}},"+ Add a bill to option")),(0,r.createElement)(s.A,null,(0,r.createElement)(i.A,{variant:"body1",color:"textSecondary"},"These options will be displayed as a shipping option on the checkout page.")),(0,r.createElement)(c.A,{sx:{marginY:"20px"}}),(0,r.createElement)(a.A,{sx:{margin:"20px auto"}},B.map((e=>(0,r.createElement)(a.A,{key:e.id},(0,r.createElement)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},(0,r.createElement)(i.A,{variant:"h6",component:"div"},e.bill_to_title),(0,r.createElement)(u.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:t=>((e,t)=>{L(e.currentTarget),w(t)})(t,e)},(0,r.createElement)(y.A,null))),(0,r.createElement)(a.A,null,0===e.services.length?(0,r.createElement)(a.A,{sx:{backgroundColor:"#f1f1f1",padding:"10px",textAlign:"center",borderRadius:"4px"}},"Add service option to offer at checkout"):e.services.map((e=>(0,r.createElement)(l.A,{key:e.id,sx:{marginTop:"10px",padding:"10px",backgroundColor:"#f9f9f9"}},(0,r.createElement)(s.A,null,(0,r.createElement)(d.Ay,{container:!0,spacing:2},(0,r.createElement)(d.Ay,{item:!0,xs:8},(0,r.createElement)(i.A,{variant:"subtitle1",fontWeight:"bold"},e.service_title),(0,r.createElement)(i.A,{variant:"body2",color:"textSecondary"},e.service_description)),(0,r.createElement)(d.Ay,{item:!0,xs:4,display:"flex",justifyContent:"flex-end",alignItems:"center"},(0,r.createElement)(u.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:t=>((e,t)=>{W(e.currentTarget),O(t)})(t,e)},(0,r.createElement)(y.A,null))))))))),(0,r.createElement)(a.A,{display:"flex",justifyContent:"flex-end",mt:2},(0,r.createElement)(o.A,{style:{textTransform:"initial"},onClick:()=>{O({id:0,bill_to_option_id:e.id}),_(!0)}},"+ Add a service")),(0,r.createElement)(c.A,{sx:{marginY:"20px"}})))))),(0,r.createElement)(m.A,{open:I,onClose:()=>$(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},(0,r.createElement)(p.A,{id:"alert-dialog-title"},"Are you sure you want to delete this item?"),(0,r.createElement)(h.A,null,(0,r.createElement)(A.A,{id:"alert-dialog-description"},"Once deleted, this action cannot be undone.")),(0,r.createElement)(E.A,null,(0,r.createElement)(o.A,{onClick:()=>$(!1),color:"primary"},"Cancel"),(0,r.createElement)(o.A,{onClick:()=>{const e="carrier"===J?`${eniture_sac.eniture_sac_rest_url}bill-to-option`:`${eniture_sac.eniture_sac_rest_url}service`;fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:z,delete:"1"})}).then((e=>e.json())).then((()=>{t({showAlert:!0,msg:"Deleted successfully",severity:"success"}),$(!1),M(null),R()})).catch((e=>{t({showAlert:!0,msg:"An error occurred while deleting data",severity:"error"})}))},color:"primary",autoFocus:!0},"Delete"))),(0,r.createElement)(g.A,{anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:q},(0,r.createElement)(v.A,{onClick:()=>{b(!0),q()}},"Edit"),(0,r.createElement)(v.A,{onClick:()=>U("carrier")},"Delete")),(0,r.createElement)(g.A,{anchorEl:P,keepMounted:!0,open:Boolean(P),onClose:F},(0,r.createElement)(v.A,{onClick:()=>{_(!0),F()}},"Edit"),(0,r.createElement)(v.A,{onClick:()=>U("service")},"Delete")))}}}]);