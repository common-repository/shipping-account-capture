"use strict";(globalThis.webpackChunkeniture_shipping_account_capture=globalThis.webpackChunkeniture_shipping_account_capture||[]).push([[323],{2323:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var r=l(1609),n=l(4977),a=l(9067),i=l(4073),o=l(1224),s=l(7636),c=l(1543),u=l(1641),d=l(8239),m=l(8031),p=l(6831),h=l(2477),A=l(7867),E=l(8763),g=l(3387),v=l(6554),b=l(5044),y=l(915),f=l(8766),_=l(9781);const x=({open:e,setOpen:t,onSave:l,carrier:n,setCarrier:s})=>{const[c,d]=(0,r.useState)(""),[A,g]=(0,r.useState)(""),v=()=>{t(!1),g(""),d(""),s(null)};(0,r.useEffect)((()=>{d(n&&n.bill_to_title||"")}),[n]);const b=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(e){const{current:e}=b;null!==e&&e.focus()}}),[e]),(0,r.createElement)(m.A,{open:e,onClose:v,"aria-labelledby":"carriers-dialog-title",maxWidth:"sm",fullWidth:!0},(0,r.createElement)(p.A,{sx:{m:0,p:2},id:"carriers-dialog-title"},"Bill-to option",(0,r.createElement)(u.A,{"aria-label":"close",onClick:v,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},(0,r.createElement)(_.A,null))),(0,r.createElement)(h.A,null,(0,r.createElement)(a.A,{sx:{width:"93%",p:2}},(0,r.createElement)(f.A,{label:(0,r.createElement)("span",null,"Label",(0,r.createElement)("span",{style:{color:"red"}},"*")),value:c,onChange:e=>d(e.target.value),size:"medium",variant:"standard",InputLabelProps:{shrink:!0},inputProps:{style:{padding:"10px"}},fullWidth:!0,margin:"normal",error:Boolean(A),helperText:A}),(0,r.createElement)(i.A,{variant:"p",color:"textSecondary",sx:{mt:0}},"This will be shown as a dropdown on the checkout page."))),(0,r.createElement)(E.A,null,(0,r.createElement)(o.A,{onClick:v},"Cancel"),(0,r.createElement)(o.A,{onClick:()=>{if(""===c.trim())return void g("Label is required");if(c.length>20)return void g("The label must be 20 characters or less");const e={id:n?n.id:0,bill_to_title:c};l(e),v()},color:"primary",variant:"contained"},"Save")))},C=({open:e,setOpen:t,onSave:l,service:n,setService:s})=>{const[c,d]=(0,r.useState)(""),[A,g]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[y,x]=(0,r.useState)(""),C=()=>{t(!1),b(""),x(""),d(""),s(null)};(0,r.useEffect)((()=>{n&&(d(n.service_title||""),g(n.service_description||""))}),[n]);const S=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(e){const{current:e}=S;null!==e&&e.focus()}}),[e]),(0,r.createElement)(m.A,{open:e,onClose:C,"aria-labelledby":"services-dialog-title",maxWidth:"sm",fullWidth:!0},(0,r.createElement)(p.A,{sx:{m:0,p:2},id:"services-dialog-title"},"Service option",(0,r.createElement)(u.A,{"aria-label":"close",onClick:C,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},(0,r.createElement)(_.A,null))),(0,r.createElement)(h.A,null,(0,r.createElement)(a.A,{sx:{width:"93%",p:2}},(0,r.createElement)(f.A,{label:(0,r.createElement)("span",null,"Label",(0,r.createElement)("span",{style:{color:"red"}},"*")),value:c,onChange:e=>d(e.target.value),variant:"standard",InputLabelProps:{shrink:!0},size:"medium",inputProps:{style:{padding:"10px"}},fullWidth:!0,margin:"normal",error:Boolean(v),helperText:v}),(0,r.createElement)(i.A,{variant:"p",color:"textSecondary",sx:{mt:0}},"This will be shown as a service name at checkout. Account number will be appended to the end of the service name while displaying it at checkout."),(0,r.createElement)(f.A,{label:"Description",value:A,onChange:e=>g(e.target.value),variant:"standard",InputLabelProps:{shrink:!0},size:"medium",inputProps:{style:{padding:"10px"}},fullWidth:!0,margin:"normal",error:Boolean(y),helperText:y}))),(0,r.createElement)(E.A,null,(0,r.createElement)(o.A,{onClick:C},"Cancel"),(0,r.createElement)(o.A,{onClick:()=>{if(""===c.trim())return void b("Label is required");if(c.length>20)return void b("The label must be 20 characters or less");if(A.length>50)return void x("The description must be 50 characters or less.");const e={id:n?n.id:0,service_title:c,service_description:A,bill_to_option_id:n?n.bill_to_option_id:null};l(e),C()},color:"primary",variant:"contained"},"Save")))},S=()=>{const[e,t]=(0,r.useState)({showAlert:!1,msg:"",severity:"success"}),[l,f]=(0,r.useState)(!1),[_,S]=(0,r.useState)(!1),[k,w]=(0,r.useState)(null),[T,j]=(0,r.useState)(null),[O,P]=(0,r.useState)(null),[W,B]=(0,r.useState)(null),[L,D]=(0,r.useState)([]),[I,$]=(0,r.useState)(!1),[z,J]=(0,r.useState)(null),[M,N]=(0,r.useState)(null);(0,r.useEffect)((()=>{R()}),[]);const R=()=>{fetch(`${eniture_sac.eniture_sac_rest_url}bill-to-options`).then((e=>e.json())).then((e=>{D(e)})).catch((e=>{t({showAlert:!0,msg:"Unable to fetch bill-to options",severity:"error"})}))},U=e=>{J("carrier"===e?k.id:T.id),N(e),$(!0),q(),F()},q=()=>{P(null)},F=()=>{B(null)};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(y.A,{open:e.showAlert,setOpen:e=>t((t=>({...t,showAlert:e}))),alertMsg:e.msg,severity:e.severity}),(0,r.createElement)(x,{open:l,setOpen:f,onSave:e=>{const l=`${eniture_sac.eniture_sac_rest_url}bill-to-option`;fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((()=>{t({showAlert:!0,msg:e.id?"Updated successfully":"Created successfully",severity:"success"}),R(),f(!1)})).catch((e=>{t({showAlert:!0,msg:"An error occurred while saving carrier",severity:"error"})}))},carrier:k,setCarrier:w}),(0,r.createElement)(C,{open:_,setOpen:S,onSave:e=>{const l=`${eniture_sac.eniture_sac_rest_url}service`;fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((()=>{t({showAlert:!0,msg:e.id?"Updated successfully":"Created successfully",severity:"success"}),R(),S(!1)})).catch((e=>{t({showAlert:!0,msg:"An error occurred while saving service",severity:"error"})}))},service:T,setService:j}),(0,r.createElement)(n.A,{sx:{margin:"20px auto",padding:"20px"}},(0,r.createElement)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},(0,r.createElement)(i.A,{variant:"h5",component:"div"},"Bill-to options"),(0,r.createElement)(o.A,{style:{textTransform:"initial"},onClick:()=>{w(null),f(!0)}},"+ Add a bill-to option")),(0,r.createElement)(s.A,null,(0,r.createElement)(i.A,{variant:"body1",color:"textSecondary"},"These options will be displayed as a shipping option on the checkout page.")),(0,r.createElement)(c.A,{sx:{marginY:"20px"}}),(0,r.createElement)(a.A,{sx:{margin:"20px auto"}},L.map((e=>(0,r.createElement)(a.A,{key:e.id},(0,r.createElement)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},(0,r.createElement)(i.A,{variant:"h6",component:"div"},e.bill_to_title),(0,r.createElement)(u.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:t=>((e,t)=>{P(e.currentTarget),w(t)})(t,e)},(0,r.createElement)(b.A,null))),(0,r.createElement)(a.A,null,0===e.services.length?(0,r.createElement)(a.A,{sx:{backgroundColor:"#f1f1f1",padding:"10px",textAlign:"center",borderRadius:"4px"}},"Add service option to offer at checkout"):e.services.map((e=>(0,r.createElement)(n.A,{key:e.id,sx:{marginTop:"10px",padding:"10px",backgroundColor:"#f9f9f9"}},(0,r.createElement)(s.A,null,(0,r.createElement)(d.Ay,{container:!0,spacing:2},(0,r.createElement)(d.Ay,{item:!0,xs:8},(0,r.createElement)(i.A,{variant:"subtitle1",fontWeight:"bold"},e.service_title),(0,r.createElement)(i.A,{variant:"body2",color:"textSecondary"},e.service_description)),(0,r.createElement)(d.Ay,{item:!0,xs:4,display:"flex",justifyContent:"flex-end",alignItems:"center"},(0,r.createElement)(u.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:t=>((e,t)=>{B(e.currentTarget),j(t)})(t,e)},(0,r.createElement)(b.A,null))))))))),(0,r.createElement)(a.A,{display:"flex",justifyContent:"flex-end",mt:2},(0,r.createElement)(o.A,{style:{textTransform:"initial"},onClick:()=>{j({id:0,bill_to_option_id:e.id}),S(!0)}},"+ Add a service")),(0,r.createElement)(c.A,{sx:{marginY:"20px"}})))))),(0,r.createElement)(m.A,{open:I,onClose:()=>$(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},(0,r.createElement)(p.A,{id:"alert-dialog-title"},"Delete option?"),(0,r.createElement)(h.A,null,(0,r.createElement)(A.A,{id:"alert-dialog-description"},"Are you sure you want to delete this option?")),(0,r.createElement)(c.A,null),(0,r.createElement)(E.A,null,(0,r.createElement)(o.A,{onClick:()=>$(!1),color:"primary"},"Cancel"),(0,r.createElement)(o.A,{onClick:()=>{const e="carrier"===M?`${eniture_sac.eniture_sac_rest_url}bill-to-option`:`${eniture_sac.eniture_sac_rest_url}service`;fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:z,delete:"1"})}).then((e=>e.json())).then((()=>{t({showAlert:!0,msg:"Deleted successfully",severity:"success"}),$(!1),J(null),R()})).catch((e=>{t({showAlert:!0,msg:"An error occurred while deleting data",severity:"error"})}))},color:"error",autoFocus:!0},"Delete"))),(0,r.createElement)(g.A,{anchorEl:O,keepMounted:!0,open:Boolean(O),onClose:q},(0,r.createElement)(v.A,{onClick:()=>{f(!0),q()}},"Edit"),(0,r.createElement)(v.A,{onClick:()=>U("carrier")},"Delete")),(0,r.createElement)(g.A,{anchorEl:W,keepMounted:!0,open:Boolean(W),onClose:F},(0,r.createElement)(v.A,{onClick:()=>{S(!0),F()}},"Edit"),(0,r.createElement)(v.A,{onClick:()=>U("service")},"Delete")))}}}]);